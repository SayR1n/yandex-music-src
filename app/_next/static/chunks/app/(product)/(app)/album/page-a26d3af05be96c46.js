(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8434],{2117:(e,t,a)=>{"use strict";a.d(t,{XU:()=>m});var i,l,r=a(7144),n=a(66268),s=a(73827);!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}(i||(i={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(l||(l={}));var o=function(e){var t=(0,s.A)(),a=e.value,i=e.children,l=(0,r.__rest)(e,["value","children"]);return i(t.formatNumberToParts(a,l))};function u(e){var t=function(t){var a=(0,s.A)(),i=t.value,l=t.children,n=(0,r.__rest)(t,["value","children"]),o="string"==typeof i?new Date(i||0):i;return l("formatDate"===e?a.formatDateToParts(o,n):a.formatTimeToParts(o,n))};return t.displayName=l[e],t}function d(e){var t=function(t){var a=(0,s.A)(),i=t.value,l=t.children,o=(0,r.__rest)(t,["value","children"]),u=a[e](i,o);if("function"==typeof l)return l(u);var d=a.textComponent||n.Fragment;return n.createElement(d,null,u)};return t.displayName=i[e],t}o.displayName="FormattedNumberParts",o.displayName="FormattedNumberParts";var m=d("formatDate");d("formatTime"),d("formatNumber"),d("formatList"),d("formatDisplayName"),u("formatDate"),u("formatTime")},2865:(e,t,a)=>{"use strict";a.d(t,{QQ:()=>T,Op:()=>I,x5:()=>C,jh:()=>R.PromoLandingSonataControls,s_:()=>L.RepeatButton,uP:()=>x.ShuffleButton,$u:()=>_.SonataControls,bG:()=>G,qF:()=>P.SonataVideoControls,x6:()=>S,EX:()=>s,li:()=>u,pE:()=>g,AA:()=>c.useOnRepeatClick,e9:()=>b.useOnShuffleClick,d0:()=>v.useToggleMute});var i=a(41028),l=a(75305),r=a(70879),n=a(94767);let s=e=>{if(e.data.type!==l.R.Clip)return null;{var t;let a=e.data.meta;if(!a.clipId)return null;let l=null==(t=a.artists)?void 0:t.map(e=>(0,r.as)({artist:e})),{available:s,disclaimers:o}=(0,n.fyr)(a);return(0,i.wg)({clipId:a.clipId,title:a.title,thumbnail:a.thumbnail,duration:a.duration,previewUrl:a.previewUrl,isAvailable:s,disclaimers:o,artists:l,isHiddenFromSonataQueue:e.hidden})}};var o=a(25581);let u=(e,t)=>({type:o.z4.Unloaded,meta:{id:e,albumId:t}});var d=a(95592),m=a(61744);let g=e=>{var t,a,s;switch(e.data.type){case l.R.Generative:{let a=e.data.meta,l=(0,n.QBb)(null==a?void 0:a.derivedColors);return(0,i.wg)({id:String(a.id),coverUri:a.imageUrl,title:null!=(t=a.title)?t:"",isAvailable:!0,isRemoved:!1,averageColor:l})}case l.R.Clip:case o.z4.Unloaded:case l.R.Radio:return null;default:{let t=e.data.meta,l=null==(a=t.artists)?void 0:a.map(r.dM),n=null==(s=t.albums)?void 0:s.map(d.e7);return(0,i.wg)({...(0,m.gK)(t),artists:l,albums:n,isHiddenFromSonataQueue:e.hidden})}}};var c=a(48148),b=a(73904),v=a(26893),p=a(86512),h=a(29318),A=a(48509),E=a(43090),y=a(10663);let f=i.gK.model("UnloadedEntityMeta",{id:i.gK.union(i.gK.number,i.gK.string),albumId:i.gK.maybe(i.gK.union(i.gK.number,i.gK.string))}),S=i.gK.model("UnloadedEntityData",{meta:f,type:i.gK.literal(o.z4.Unloaded)});var K=a(6247),N=a(16285);let C=m.OQ.props({artists:i.gK.array(r.PK),albums:i.gK.array(d.GI),chart:i.gK.maybe(N.Iz),isHiddenFromSonataQueue:i.gK.maybe(i.gK.boolean)}).views(e=>({get idWithContext(){return e.albumId?"".concat(e.id,":").concat(e.albumId):e.id},get artistsNames(){var t;return null==(t=e.artists)?void 0:t.map(e=>e.name).join(", ")},get mainArtist(){var a,i;return null!=(i=null==(a=e.artists)?void 0:a[0])?i:null},get mainAlbum(){var l,r;return null!=(r=null==(l=e.albums)?void 0:l[0])?r:null},get index(){var n,s,o;return null!=(o=null==(s=e.albums[0])||null==(n=s.trackPosition)?void 0:n.index)?o:null},get isPodcast(){var u;return e.isTrackPodcast||(null==(u=this.mainAlbum)?void 0:u.isPodcast)},get isAudiobook(){return e.type===K.S.AUDIOBOOK},get isFairyTale(){return e.type===K.S.FAIRY_TALE},get isNonMusic(){return this.isPodcast||this.isAudiobook||this.isFairyTale},get isAvailableOnlyForPlus(){var d;return!!(null==(d=this.mainAlbum)?void 0:d.isAvailableOnlyForPlus)}})).actions(e=>({changeTrackInfo:(0,i.L3)(function*(t,a){let{ugcResource:l,modelActionsLogger:s}=(0,i._$)(e);if(e.artists.map(e=>e.name).join(", ")===a&&t===e.title)return n.FlZ.OK;try{var o;yield l.changeTrack({trackId:e.id,title:t,artist:a}),e.title=t;let s=(null==(o=e.artists[0])?void 0:o.id)||"0";if(e.artists=(0,i.wg)([]),a){let t=r.PK.create({id:s,name:a,isAvailable:!0});e.artists=(0,i.wg)([t])}return n.FlZ.OK}catch(e){return s.error(e),n.FlZ.ERROR}})})),T=i.gK.model("BaseSonataState",{contextType:i.gK.maybeNull(i.gK.enumeration(Object.values(A.K))),contextId:i.gK.maybeNull(i.gK.string),entityMeta:i.gK.maybeNull(C),status:i.gK.enumeration(Object.values(o.MT)),canMoveForward:i.gK.boolean,canMoveBackward:i.gK.boolean,canSpeed:i.gK.boolean,repeatMode:i.gK.enumeration(Object.values(y.pM)),canChangeRepeatMode:i.gK.boolean,volume:i.gK.maybe(i.gK.number),speed:i.gK.maybe(i.gK.number),position:i.gK.maybeNull(i.gK.number),duration:i.gK.maybeNull(i.gK.number),canShuffle:i.gK.boolean,shuffle:i.gK.boolean,quality:i.gK.enumeration(Object.values(E.e)),unloadedEntitiesData:i.gK.maybe(i.gK.array(S))}).volatile(()=>({volatileUnloadedEntitiesData:void 0})).views(e=>({get unloadedEntitiesDataFromModels(){var t;return null!=(t=e.volatileUnloadedEntitiesData)?t:(0,h.HO)(e.unloadedEntitiesData)},get isVibeContext(){return e.contextType===A.K.Vibe},get isGenerativeContext(){return e.contextType===A.K.Generative},get isPaused(){return e.status===o.MT.PAUSED},get isPlaying(){return e.status===o.MT.PLAYING},get isContextRepeatMode(){return e.repeatMode===y.pM.CONTEXT},get isOneRepeatMode(){return e.repeatMode===y.pM.ONE}})).actions(e=>({setContextId:t=>{e.contextId=String(t)},setContextType:t=>{e.contextType=t},setEntityMeta:t=>{t&&t.data.meta&&(e.entityMeta=g(t))},setUnloadedEntitiesData:t=>{t&&(e.volatileUnloadedEntitiesData=(0,p.A)(t),e.unloadedEntitiesData=(0,i.wg)(t))},resetUnloadedEntitiesData:()=>{e.volatileUnloadedEntitiesData=void 0,e.unloadedEntitiesData=void 0},setStatus:t=>{e.status=t},setCanMoveForward:t=>{e.canMoveForward=t},setCanMoveBackward:t=>{e.canMoveBackward=t},setVolume:t=>{e.volume=t},setCanSpeed:t=>{e.canSpeed=t},setSpeed:t=>{e.speed=t},setRepeatMode:t=>{e.repeatMode=t},setCanChangeRepeatMode:t=>{e.canChangeRepeatMode=t},setCanShuffle:t=>{e.canShuffle=t},setShuffle:t=>{e.shuffle=t},setQuality:t=>{e.quality=t},setPosition:t=>{e.position=t},setDuration:t=>{e.duration=t}})),I=a(60030).z8.props({artists:i.gK.array(r.PK),isHiddenFromSonataQueue:i.gK.maybe(i.gK.boolean)}).views(e=>({get idWithContext(){return String(e.clipId)}})),G=T.props({playlistFilter:i.gK.maybe(i.gK.string),areCoresRegistered:i.gK.boolean,isVHCoreRegistered:i.gK.boolean,shouldApplyYnisonState:i.gK.optional(i.gK.boolean,!0)}).actions(e=>({setIsVHCoreRegistered(t){e.isVHCoreRegistered=t},setPlaylistFilter:t=>{e.playlistFilter=t},setCoresAsRegistered:t=>{e.areCoresRegistered=t},setShouldApplyYnisonState:t=>{e.shouldApplyYnisonState=t}})).named("SonataState");a(75797),a(1199);var R=a(61646),L=a(57526),x=a(67950),_=a(357),P=a(33363)},14795:(e,t,a)=>{"use strict";a.d(t,{dx:()=>u,l$:()=>P.AlbumPage,MH:()=>_,Wh:()=>D}),a(86916);var i,l,r=a(41028),n=a(94767),s=a(59615);let o=r.gK.model("Cpa",{clid:r.gK.string,artistId:r.gK.number}),u=r.gK.compose(r.gK.model("AlbumCpa",{albumId:r.gK.maybeNull(r.gK.number),cpa:r.gK.maybeNull(o)}),s.pl).views(e=>({isPlusCPAEnabled(t){let{pageAlbumId:a,albumId:i,isNonMusic:l}=t,{experiments:n,user:{isAuthorized:s}}=(0,r.Zn)(e);return!1},isPlusCPAPlayerBarEnabled(t,a){let{experiments:i,user:{hasPlus:l}}=(0,r.Zn)(e);return!1},isPlusCPABannerEnabled(t){var a;let{pageAlbumId:i,albumId:l,isNonMusic:n}=t,{experiments:s,settings:o,user:{hasPlus:u}}=(0,r.Zn)(e);return null==(a=o.browserInfo)||a.isTouch,!1},isHidePlusModalEnabled(t,a){var i;let{experiments:l,settings:n,user:{hasPlus:s}}=(0,r.Zn)(e);return null==(i=n.browserInfo)||i.isTouch,!1}})).actions(e=>({getCpa:(0,r.L3)(function*(t){let{albumId:a,preloadedCpa:i}=t,{experiments:l,user:n}=(0,r.Zn)(e)}),reset(){e.albumId=null,e.destroyItems([e.cpa])}}));var d=a(61979),m=a(72315),g=a(93435),c=a(15479),b=a(6247);(i||(i={})).RECENT_ALBUMS="recent-albums",function(e){e[e.DAY=1]="DAY",e[e.WEEK=7]="WEEK",e[e.MONTH=30]="MONTH"}(l||(l={}));var v=a(85897),p=a(12853),h=a(52732),A=a(53706),E=a(2865),y=a(44078),f=a(95592);let S=e=>(0,r.wg)({type:f.rU.TEXT,data:null!=e?e:null,loadingState:n.GuX.RESOLVE}),K=e=>{var t;let{data:a,...i}=e;return(0,r.wg)({type:null!=(t=null==a?void 0:a.type)?t:b.S.TRACK,data:null!=a?a:null,...i})},N=e=>"".concat(e,"-text"),C=e=>String(e),T=e=>(0,r.wg)({id:e.id,type:e.type,title:e.title,albums:e.albums.map(h.pp)}),I=e=>!!(e&&"position"in e),G=r.gK.compose(r.gK.model("AlbumDonations",{items:r.gK.maybeNull(r.gK.array(A.eG))}),s.pl,s.XT).actions(e=>({reset(){e.loadingState=n.GuX.IDLE,e.destroyItems([e.items])}})),R=r.gK.model("LabelItem",{id:r.gK.number,name:r.gK.string}),L=r.gK.compose(r.gK.model("RelatedAlbumsPage",{items:r.gK.array(h.JC)}),s.pl,s.XT).actions(e=>({reset(){e.loadingState=n.GuX.IDLE,e.destroyItems([e.items])}})),x=r.gK.compose(r.gK.model("RelatedContent",{items:r.gK.maybeNull(r.gK.array(p.N3))}),s.pl,s.XT).actions(e=>({reset(){e.loadingState=n.GuX.IDLE,e.destroyItems([e.items])}})),_=r.gK.compose(r.gK.model("AlbumPage",{id:r.gK.maybeNull(r.gK.number),meta:r.gK.maybeNull(h.JC),items:r.gK.array(p.PX),indexItems:r.gK.map(r.gK.array(r.gK.number)),errorStatusCode:r.gK.maybeNull(r.gK.number),deprecationTargetAlbumId:r.gK.maybeNull(r.gK.number),latestGenreAlbums:r.gK.maybe(L),otherArtistAlbums:r.gK.maybe(L),otherAlbumVersions:r.gK.maybe(r.gK.array(h.JC)),labels:r.gK.maybeNull(r.gK.array(R)),description:r.gK.maybe(r.gK.string),donations:r.gK.maybe(G),relatedContent:r.gK.maybe(x),allTracksUnfinished:r.gK.boolean}),s.Ec,s.pl,s.XT).views(e=>{let t={get isOtherArtistAlbumsAvailable(){var a,i,l,s,o;return!!(!(null==(a=e.meta)?void 0:a.isNonMusic)&&(null==(l=e.meta)||null==(i=l.artists)?void 0:i.length)===1&&!(null==(o=e.meta)||null==(s=o.artists[0])?void 0:s.various))},get isLatestGenreAlbumsAvailable(){var u,m;return!!(!(null==(u=e.meta)?void 0:u.isNonMusic)&&(null==(m=e.meta)?void 0:m.genre))},get isNotFound(){return e.isRejected&&(e.errorStatusCode===d.X1.NOT_FOUND||e.errorStatusCode===d.X1.BAD_REQUEST)},get isCacheNotFound(){return e.isRejected&&e.errorStatusCode===v.FX},get hasDonations(){var g;return!!((null==(g=e.donations)?void 0:g.isResolved)&&e.donations&&e.donations.items&&e.donations.items.length>0)},get hasOtherAlbumVersions(){return!!(e.isNeededToLoad||e.loadingState===n.GuX.PENDING||e.otherAlbumVersions&&e.otherAlbumVersions.length>0)},get hasLatestGenreAlbums(){var c,b;let a=e.latestGenreAlbums&&e.latestGenreAlbums.items&&e.latestGenreAlbums.items.length>0;return!!(t.isLatestGenreAlbumsAvailable&&((null==(c=e.latestGenreAlbums)?void 0:c.isNeededToLoad)||(null==(b=e.latestGenreAlbums)?void 0:b.isLoading)||a))},get hasOtherArtistAlbums(){var p,h;let a=e.otherArtistAlbums&&e.otherArtistAlbums.items&&e.otherArtistAlbums.items.length>0;return!!(t.isOtherArtistAlbumsAvailable&&((null==(p=e.otherArtistAlbums)?void 0:p.isNeededToLoad)||(null==(h=e.otherArtistAlbums)?void 0:h.isLoading)||a))},get isLoading(){return e.isNeededToLoad||e.loadingState===n.GuX.PENDING},get isLatestGenreAlbumsLoading(){var A,E;return!!((null==(A=e.latestGenreAlbums)?void 0:A.isNeededToLoad)||(null==(E=e.latestGenreAlbums)?void 0:E.isLoading))},get isOtherArtistAlbumsLoading(){var y,S;return!!((null==(y=e.otherArtistAlbums)?void 0:y.isNeededToLoad)||(null==(S=e.otherArtistAlbums)?void 0:S.isLoading))},get isRelatedContentLoading(){var K,N;return!!((null==(K=e.relatedContent)?void 0:K.isNeededToLoad)||(null==(N=e.relatedContent)?void 0:N.isLoading))},get contextMeta(){var C,T,I,G,R,L,x,_,P;return{id:e.meta.id,title:null==(C=e.meta)?void 0:C.title,coverUri:null==(T=e.meta)?void 0:T.coverUri,type:null==(I=e.meta)?void 0:I.type,year:null==(G=e.meta)?void 0:G.year,version:null==(R=e.meta)?void 0:R.version,genre:null==(L=e.meta)?void 0:L.genre,likesCount:null==(x=e.meta)?void 0:x.likesCount,averageColor:null==(_=e.meta)?void 0:_.averageColor,available:null==(P=e.meta)?void 0:P.isAvailable}},get tracks(){return e.items.filter(e=>e.type!==f.rU.TEXT)},get lastEpisodes(){return t.tracks.slice(0,5)},get lastEpisodesTrackIds(){return t.lastEpisodes.map(e=>e.id)},get hasLabel(){return!!(e.labels&&e.labels.length)},get shouldShowLabel(){let{experiments:a}=(0,r.Zn)(e);return t.hasLabel&&a.checkExperiment(n.zal.WebNextLabelPage,"on")},labelUrl(e){let{href:t}=(0,n.uvd)("/label/:labelId",{params:{labelId:e}});return t}};return t}).actions(e=>{let t={makeFlatVolumeItems:t=>{let a=0;t.volumes.forEach(i=>{t.volumes.length>1&&i[0]&&(e.items.push(S()),e.indexItems.set(N(i[0].id),[e.items.length-1])),i.forEach(t=>{e.items.push(K({id:t.id,loadingState:n.GuX.IDLE,positionInContext:a}));let i=e.indexItems.get(String(t.id));e.indexItems.set(C(t.id),i?[...i,e.items.length-1]:[e.items.length-1]),a++})})},updateVolumeItemsState:(t,a)=>{t.forEach(t=>{let i=e.indexItems.get(String(t));null==i||i.forEach(i=>{let l=e.items[i];I(l)&&(e.items[i]=K({id:t,loadingState:a,positionInContext:l.positionInContext,hasEverFinished:l.hasEverFinished}))})})},insertDataToVolumeItems:t=>{t.forEach((t,a)=>{let i=e.indexItems.get(C(t.id));null==i||i.forEach(i=>{var l,r,s,o,u;let d=e.items[0],m=e.items[i],g=e.items[i-1];if(!I(m))return;let c=I(d)&&d.id===m.id?1:null==(s=t.albums)||null==(r=s[0])||null==(l=r.trackPosition)?void 0:l.index,b=null==m?void 0:m.positionInContext,v=I(g)&&(null==g?void 0:g.position)?g.position+1:c,p=(0,y.vU)(t,{hasEverFinished:null==m?void 0:m.hasEverFinished});if(p.isRemoved){e.items[i]=K({id:t.id,loadingState:n.GuX.REJECT,positionInContext:b,position:I(g)?g.position:a});return}e.items[i]=K({id:t.id,loadingState:n.GuX.RESOLVE,positionInContext:b,data:p,position:(null==g?void 0:g.type)===f.rU.TEXT?1:v,isBest:null==(u=e.meta)||null==(o=u.bestAlbumTracks)?void 0:o.includes(Number(t.id)),hasEverFinished:null==m?void 0:m.hasEverFinished})});let l=e.indexItems.get(N(t.id));null==l||l.forEach(a=>{var i,l,r;e.items[a]=S(null==(r=t.albums)||null==(l=r[0])||null==(i=l.trackPosition)?void 0:i.volume)})})},afterCreate(){e.getDescriptionTexts()},setAlbumUnfinished:()=>{var a;t.markUnfinished({albumId:e.id||0}),null==(a=e.meta)||a.updateFinished(!1)},setAllTracksUnfinished:t=>{e.allTracksUnfinished=t},checkAllAlbumTrackFinished:()=>{var a,i;e.items.filter(e=>{let{type:t,data:a}=e;return a&&t!==f.rU.TEXT}).every(e=>{var t;let{data:a}=e;return null==a||null==(t=a.streamProgress)?void 0:t.hasEverFinished})&&((null==(a=e.meta)?void 0:a.listeningFinished)||(t.markFinished({albumId:Number(e.id)}),null==(i=e.meta)||i.updateFinished(!0)))},markTracksFinished:t=>{let{withoutTracks:a=[]}=t;e.items.forEach(e=>{if(e.type===f.rU.TEXT)return;let{data:t}=e;if(!(t&&a.includes(t.id)))if(t){var i;null==(i=t.streamProgress)||i.updateEverFinished(!0)}else e.updateEverFinished(!0)})},markFinished:(0,r.L3)(function*(t){let{streamsResource:a,modelActionsLogger:i}=(0,r._$)(e);try{return yield a.markAlbumFinished(t)}catch(e){return i.error(e),m.T.ERROR}}),markUnfinished:(0,r.L3)(function*(t){let{streamsResource:a,modelActionsLogger:i}=(0,r._$)(e);try{return yield a.markAlbumUnfinished(t)}catch(e){return i.error(e),m.T.ERROR}}),setListeningFinishedStatus:(0,r.L3)(function*(){var a;return(null==(a=e.meta)?void 0:a.listeningFinished)?(t.setAllTracksUnfinished(!0),yield t.markUnfinished({albumId:Number(e.id)})):yield t.markFinished({albumId:Number(e.id)})}),getLatestGenreAlbums:(0,r.L3)(function*(t){let{topResource:a,modelActionsLogger:i}=(0,r._$)(e);if(e.latestGenreAlbums&&!e.latestGenreAlbums.isLoading)try{e.latestGenreAlbums.loadingState=n.GuX.PENDING;let i=yield a.getTopByGenre(t);e.latestGenreAlbums.items=(0,r.wg)(i.albums.map(h.pp)),e.latestGenreAlbums.loadingState=n.GuX.RESOLVE}catch(t){i.error(t),e.latestGenreAlbums.loadingState=n.GuX.REJECT}}),getOtherArtistAlbums:(0,r.L3)(function*(t,a){let{artistsResource:i,modelActionsLogger:l}=(0,r._$)(e);if(e.otherArtistAlbums&&!e.otherArtistAlbums.isLoading)try{if(!t.artistId){e.otherArtistAlbums.loadingState=n.GuX.REJECT;return}e.otherArtistAlbums.loadingState=n.GuX.PENDING;let l=yield i.getSafeDirectAlbums({...t,artistId:t.artistId});e.otherArtistAlbums.items=(0,r.wg)(l.albums.filter(e=>String(e.id)!==String(a)).map(h.pp)),e.otherArtistAlbums.loadingState=n.GuX.RESOLVE}catch(t){l.error(t),e.otherArtistAlbums.loadingState=n.GuX.REJECT}}),getTracks:(0,r.L3)(function*(a){let{trackIds:i}=a,{tracksResource:l,modelActionsLogger:s}=(0,r._$)(e);try{var o;let a;if(!(null==(o=e.meta)?void 0:o.id))return;t.updateVolumeItemsState(i,n.GuX.PENDING);let r=yield l.getTracksMeta({trackIds:(a=e.meta.id,i.map(e=>"".concat(e,":").concat(a))),withProgress:!0});t.insertDataToVolumeItems(r)}catch(e){s.error(e),t.updateVolumeItemsState(i,n.GuX.REJECT)}}),getDonations:(0,r.L3)(function*(t){let{albumId:a}=t,{experiments:i}=(0,r.Zn)(e),{donationResource:l,modelActionsLogger:s}=(0,r._$)(e);if(i.checkExperiment(n.zal.WebNextAlbumDonationButton,"on")&&e.donations&&!e.donations.isLoading)try{e.donations.loadingState=n.GuX.PENDING;let{donations:t}=yield l.getAlbumDonations({albumId:a});t&&(e.donations.items=(0,r.wg)(t.map(e=>{var t;let{data:a}=e;return(0,A.GT)({url:a.tipUrl,goal:null==(t=a.goal)?void 0:t.title,artist:a.artist})}))),e.donations.loadingState=n.GuX.RESOLVE}catch(t){s.error(t),e.donations.loadingState=n.GuX.REJECT}}),getData:(0,r.L3)(function*(a){let{albumId:s,resumeStream:o,preloadedAlbum:u,withLatestGenreAlbumsRequest:m=!0,withOtherArtistAlbumsRequest:v=!0,sonataState:p}=a,{albumResource:A,modelActionsLogger:y}=(0,r._$)(e),{experiments:f,disclaimer:S}=(0,r.Zn)(e),K=f.checkExperiment(n.zal.WebNextAgentPodcast,"on");if(e.id=s,e.loadingState!==n.GuX.PENDING)try{var N,C,T,I,G,R,L;let a,y;e.loadingState=n.GuX.PENDING;let f=u;if(f||(f=yield A.getAlbumWithTracksIds({albumId:s,resumeStream:o})),(null==f?void 0:f.error)==="not-found"){e.errorStatusCode=d.X1.NOT_FOUND,e.loadingState=n.GuX.REJECT,e.otherArtistAlbums&&(e.otherArtistAlbums.loadingState=n.GuX.REJECT),e.latestGenreAlbums&&(e.latestGenreAlbums.loadingState=n.GuX.REJECT);return}if(null==(N=f.deprecation)?void 0:N.targetAlbumId){e.deprecationTargetAlbumId=f.deprecation.targetAlbumId,e.loadingState=n.GuX.RESOLVE;return}let x=(null!=(T=f.disclaimers)?T:[]).includes(g.M.MODAL),_=f.type===c._.PODCAST&&(null!=(I=f.disclaimers)?I:[]).includes(g.M.FOREIGN_AGENT),P=null==(C=(0,n.bRW)(null!=(G=f.disclaimers)?G:[],g.M.FOREIGN_AGENT))?void 0:C[0];(x||K&&_||P)&&(yield S.getDisclaimerData({entityId:s,entityType:f.type===c._.PODCAST?n.nPY.PODCAST:n.nPY.ALBUM,disclaimerId:null==P?void 0:P.id})),p.setUnloadedEntitiesData(f.volumes.flat().map(e=>(0,E.li)(e.id))),e.meta=(0,h.pp)(f),e.labels=(0,r.wg)(f.labels),e.contentWarning=(0,r.wg)(f.contentWarning),e.description=(0,r.wg)(f.description),f.duplicates&&f.duplicates.length>0&&(e.otherAlbumVersions=(0,r.wg)(null==(R=f.duplicates)?void 0:R.map(h.pp))),t.makeFlatVolumeItems(f);let F=[];for(let t=0;t<10;t++){let a=e.items[t];(null==a?void 0:a.type)===b.S.TRACK&&F.push(String(a.id))}yield t.getTracks({trackIds:F}),e.isLatestGenreAlbumsAvailable&&m&&(a=t.getLatestGenreAlbums({category:i.RECENT_ALBUMS,period:l.WEEK,pageSize:8,genre:f.genre})),e.isOtherArtistAlbumsAvailable&&v&&(y=t.getOtherArtistAlbums({artistId:String(null==(L=f.artists[0])?void 0:L.id),limit:8},s)),yield Promise.allSettled([a,y]),e.loadingState!==n.GuX.IDLE&&(e.loadingState=n.GuX.RESOLVE)}catch(t){y.error(t),t instanceof d.GX&&(e.errorStatusCode=t.statusCode),e.loadingState!==n.GuX.IDLE&&(e.loadingState=n.GuX.REJECT,e.otherArtistAlbums&&(e.otherArtistAlbums.loadingState=n.GuX.REJECT),e.latestGenreAlbums&&(e.latestGenreAlbums.loadingState=n.GuX.REJECT))}}),loadLastEpisodes(){t.getTracks({trackIds:e.lastEpisodesTrackIds})},getRelatedContent:(0,r.L3)(function*(){let{albumResource:t,modelActionsLogger:a}=(0,r._$)(e);if(e.relatedContent&&!e.relatedContent.isLoading)try{var i,l;if(!(null==(i=e.meta)?void 0:i.id))return;e.relatedContent.loadingState=n.GuX.PENDING;let a=yield t.getRelatedContent({albumId:e.meta.id});e.relatedContent.items=(0,r.wg)(null==(l=a.blocks)?void 0:l.map(T)),e.relatedContent.loadingState=n.GuX.RESOLVE}catch(t){a.error(t),e.relatedContent.loadingState=n.GuX.REJECT}}),reset(t){var a,i,l,s;let{albumCPA:o}=(0,r.Zn)(e);o.reset(),t.resetUnloadedEntitiesData(),e.id=null,e.errorStatusCode=null,e.deprecationTargetAlbumId=null,e.indexItems.clear(),e.loadingState=n.GuX.IDLE,e.description="",e.allTracksUnfinished=!1,null==(a=e.latestGenreAlbums)||a.reset(),null==(i=e.otherArtistAlbums)||i.reset(),null==(l=e.relatedContent)||l.reset(),null==(s=e.donations)||s.reset(),e.destroyItems([e.meta,e.items,e.otherAlbumVersions,e.labels])}};return t});a(99683);var P=a(82358);a(47954),a(33801);let F=r.gK.compose(r.gK.model("PromoCampaign",{isActive:r.gK.boolean}),s.XT).views(e=>({get isPromoCampaignActive(){return e.isResolved&&e.isActive},get isPromoCampaignInactive(){return e.isRejected||e.isResolved&&!e.isActive}})).actions(e=>({getData:(0,r.L3)(function*(t){let{isActive:a,albumId:i}=t,{promoResource:l,modelActionsLogger:s}=(0,r._$)(e);if(!e.isLoading)try{e.loadingState=n.GuX.PENDING,"boolean"==typeof a?e.isActive=a:e.isActive=(yield l.getPromoAlbumInfo({albumId:i})).active,e.loadingState=n.GuX.RESOLVE}catch(t){s.error(t),e.loadingState=n.GuX.REJECT}})})),D=_.props({promoCampaign:F,state:E.QQ}).actions(e=>({getDataByCampaign:(0,r.L3)(function*(t){let{albumId:a,preloadedAlbum:i,preloadedCpa:l,isActive:n}=t;if(yield e.promoCampaign.getData({albumId:a,isActive:n}),e.promoCampaign.isPromoCampaignActive){let{albumCPA:t}=(0,r.Zn)(e),n=e.getData({albumId:a,resumeStream:!1,preloadedAlbum:i,withLatestGenreAlbumsRequest:!1,withOtherArtistAlbumsRequest:!1,sonataState:e.state}),s=t.getCpa({albumId:a,preloadedCpa:l});yield Promise.allSettled([n,s])}})})).named("PromoLandingAlbumPage")},26271:e=>{e.exports={root:"NotFound_root__47ZX6",root_desktop:"NotFound_root_desktop___QqSb",navigation:"NotFound_navigation__q8rIW",content:"NotFound_content__3kry_",icon:"NotFound_icon___Wa9y",title:"NotFound_title__akG_o",important:"NotFound_important__z1LWl",text:"NotFound_text__oxDZv",button:"NotFound_button__jF4uH"}},27160:e=>{e.exports={root:"VirtualGrid_root__nSEzJ",column:"VirtualGrid_column__P8hJp",row:"VirtualGrid_row__PL5V_"}},35233:(e,t,a)=>{"use strict";a.d(t,{M:()=>i.NotFound});var i=a(86033)},69818:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var i=a(33008),l=a(17846),r=a(66268),n=a(14795),s=a(94767);let o=()=>{let e=(0,l.useSearchParams)().get("albumId");return e&&(0,s.LLJ)(e)||(0,l.notFound)(),(0,i.jsx)(r.Suspense,{children:(0,i.jsx)(n.l$,{albumId:e})})}},79743:(e,t,a)=>{Promise.resolve().then(a.bind(a,69818))},83080:e=>{e.exports={root:"VirtualGridRow_root___UfbI"}},86033:(e,t,a)=>{"use strict";a.d(t,{NotFound:()=>b});var i=a(33008),l=a(85896),r=a(97531),n=a(96560),s=a(44189),o=a(78016),u=a(77868),d=a(94767),m=a(53799),g=a(26271),c=a.n(g);let b=(0,r.PA)(e=>{let{className:t,title:a,description:r,iconVariant:g="musicLogo",iconClassName:b,iconSize:v}=e,{contentRef:p}=(0,d.gKY)(),h=(0,d.ZpR)(d.Zyd.main.href);return(0,d.NBO)(!0),(0,i.jsxs)("div",{className:(0,l.$)(c().root,{[c().root_desktop]:!p},t),children:[(0,i.jsx)(m.Lh,{withBackwardFallback:"/",className:c().navigation,withForwardControl:!1}),(0,i.jsxs)("div",{className:c().content,children:[(0,i.jsx)(o.Icon,{className:(0,l.$)(c().icon,b),variant:g,size:v}),(0,i.jsx)(u.Heading,{className:(0,l.$)(c().title,c().important),variant:"h3",size:"xs",children:a||(0,i.jsx)(n.A,{id:"page-error.page-does-not-exist"})}),(0,i.jsx)(u.Caption,{className:(0,l.$)(c().text,c().important),variant:"span",type:"text",size:"l",weight:"normal",children:r||(0,i.jsx)(n.A,{id:"page-error.page-does-not-exist-description"})}),(0,i.jsx)(s.Button,{onClick:h,className:c().button,role:"link",color:"secondary",size:"l",radius:"xxxl",children:(0,i.jsx)(u.Caption,{type:"controls",variant:"span",size:"m",children:(0,i.jsx)(n.A,{id:"navigation.page-main"})})})]})]})})},95227:(e,t,a)=>{"use strict";a.d(t,{Q$:()=>f,Ux:()=>A,LW:()=>m,rA:()=>d});var i=a(84798),l=a(42314),r=a(94767),n=a(23949),s=a(66268),o=a(42213);let u={width:400,height:400},d=e=>{let{count:t,getEstimateSize:a,gap:i,containerRef:l}=e,{settings:{isMobile:d}}=(0,r.Pjs)(),{contentScrollRef:m}=(0,r.gKY)(),g=(0,s.useRef)(new Map),c=(0,s.useRef)(void 0),b={count:t,gap:i,estimateSize:e=>{let t=g.current.get(String(e));return null!=t?t:a(e)},overscan:2,initialRect:u,isScrollingResetDelay:50,scrollMargin:((e,t,a)=>{if(!t)return 0;let i=t.getBoundingClientRect().top;return e&&1?i+window.scrollY:!e&&a?i+a.scrollTop:0})(d,l,m)},v=(0,n.XW)(b),p=(0,n.Te)({...b,getScrollElement:()=>m,initialOffset:null==m?void 0:m.scrollTop}),h=d?v:p,A=(0,o.c)(()=>{h.measure()});return(0,s.useEffect)(()=>{c.current||(c.current=new ResizeObserver(e=>{let t=!1;e.forEach(e=>{let a=e.target.getAttribute("data-index");if(e.target&&a){let i=e.contentRect.height;i&&i!==g.current.get(a)&&(g.current.set(a,e.contentRect.height),t=!0)}}),t&&A()}))},[A]),{virtualizer:h,resizeObserver:c.current}},m=e=>{let{count:t,getEstimateRowSize:a,rowGap:n,columnGap:s,minColumnWidth:o,maxColumnWidth:u,minColumnCount:m,maxColumnCount:g,containerRef:c}=e,{rowCount:b,columnCount:v}=(0,r.E11)({totalCount:t,columnGap:null!=s?s:0,minColumnCount:m,maxColumnWidth:u,minColumnWidth:o,maxColumnCount:g,containerRef:c}),{virtualizer:p,resizeObserver:h}=d({count:b,getEstimateSize:a,gap:n,containerRef:c}),A=(0,i.A)(Array.from({length:t},(e,t)=>t),v),E=(0,l.L)(()=>{var e,t;if(!p.range)return null;let a=null==(e=A[p.range.startIndex])?void 0:e.at(0),i=null==(t=A[p.range.endIndex])?void 0:t.at(-1);return void 0!==a&&void 0!==i?{startIndex:a,endIndex:i}:null});return{virtualizer:p,rowResizeObserver:h,indices:A,columnCount:v,visibleRange:E}};var g=a(33008),c=a(97531),b=a(44612),v=a(85896),p=a(83080),h=a.n(p);let A=(0,c.PA)(e=>{let{indices:t,virtualItem:a,renderItemByIndex:i,columnClassName:l,className:r,resizeObserver:n,scrollMargin:o}=e,u=(0,s.useRef)(null),d=t[a.index],m={"--virtual-grid-row-vertical-offset":"".concat(a.start-o,"px")};return(0,s.useEffect)(()=>{let e=u.current;if(e)return null==n||n.observe(e),()=>{null==n||n.unobserve(e)}},[n]),(0,g.jsx)("div",{"data-index":a.index,ref:u,style:m,className:(0,v.$)(h().root,r),children:null==d?void 0:d.map(e=>(0,g.jsx)("div",{className:l,children:i(e)},"".concat(a.key,"_").concat(e)))})});var E=a(27160),y=a.n(E);let f=(0,c.PA)(e=>{let{count:t,rowGap:a,columnGap:i,getEstimateRowSize:l,minColumnCount:r=2,minColumnWidth:n,maxColumnWidth:o,maxColumnCount:u,renderItemByIndex:d,onChangeRange:c}=e,[v,p]=(0,b.d)(),{virtualizer:h,rowResizeObserver:E,columnCount:f,indices:S}=m({count:t,rowGap:a,columnGap:i,getEstimateRowSize:l,minColumnCount:r,minColumnWidth:n,maxColumnWidth:o,maxColumnCount:u,containerRef:v});(0,s.useEffect)(()=>{!h.isScrolling&&h.range&&(null==c||c(h.range,f))},[c,h.isScrolling,h.range,f]);let K={"--virtual-grid-height":"".concat(h.getTotalSize(),"px"),"--virtual-grid-column-count":f};return(0,g.jsx)("div",{ref:p,style:K,className:y().root,children:h.getVirtualItems().map(e=>(0,g.jsx)(A,{className:y().row,columnClassName:y().column,virtualItem:e,resizeObserver:E,indices:S,renderItemByIndex:d,scrollMargin:h.options.scrollMargin},e.key))})})}},e=>{e.O(0,[4785,9598,9712,8656,8237,2273,8712,6030,6451,1709,9284,9323,9814,1311,7764,6706,2089,996,4236,6728,3949,9152,4767,3799,9615,3551,2732,1744,4204,4078,9718,4760,508,3984,5897,5971,9902,5598,7358],()=>e(e.s=79743)),_N_E=e.O()}]);